<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head.ejs')%>
<body>
    <%- include('../partials/nav.ejs')%>
   <!--modal-->
   <div class="modal" id="signup" style="border-radius: 5px;">
    <div class="modal-content center">
      <p >Please, Sign up to Load More Content</p>
      <a class="btn-small purple" id="bn-signup">SignUp with Google<i class="material-icons right">anchor</i></a>
    </div>
  </div>
<!--content-->
    <div class="container">
        <h3 class="light grey-text customfont">about page</h3>
        <h5 class="light grey-text customfont">Discover amazing and fantastic blogs on the site. This Blogs are written by
          different people .. You have to signin to enjoy other services like adding a blog , loading more blogs and much more.
        <br> <br>
      Have fun üòçüòç
      </h5><br><br>
      <div id="logged-out" style="display: none;" >
        <button class="btn-small purple button modal-trigger customfont" data-target="signup" style="font-size: 15px;">sign in</button>
      </div>
    </div>
     
    <script type="module">
      import{signInWithGoogle,signout,onAuthStateChanged,auth}from '/fireConfig.js';
  //sign in
  const signup=document.querySelector('#bn-signup');
      signup.addEventListener('click',()=>{
        const modal=document.querySelector('.modal')
        signInWithGoogle()
      });
        //logout
  const logout=document.querySelector('.logout');
  logout.addEventListener('click',()=>{
   signout().then(
          window.location.href='/'
        );
  })
  const logout2=document.querySelector('.logout2');
      logout2.addEventListener('click',()=>{
        signout().then(
          window.location.href='/'
        );
      })
  
  //ui authentication
        const loggedinLink=document.querySelectorAll('#logged-in')
        const loggedoutLink=document.querySelectorAll('#logged-out')
  
        const setupUI=(user)=>{
          if(user){
            loggedinLink.forEach(item=>item.style.display='block')
            loggedoutLink.forEach(item=>item.style.display='none')
          }else{
            loggedinLink.forEach(item=>item.style.display='none')
            loggedoutLink.forEach(item=>item.style.display='block')
          }
        }
   auth.onAuthStateChanged((user)=>{
       //going to controll what users see if logged in or out
       if(user){
         //console.log('user is logged in', user)
         setupUI(user)
       } else {
         //console.log('user is logged outer',user)
         setupUI()
       }
     })
   
        
    </script>
   
  <!--  Scripts-->
  <script src="./js/materialize.min.js"></script>
  <script src="./js/init.js" type="module"></script>
  </body>
</html>
